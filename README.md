# ジュニアサッカー試合スケジュール生成ツール

AIで作成しました。
ジュニア世代の8人制サッカー大会における、公平な出場時間配分を実現する試合スケジュール自動生成ツールです。


## 概要

このPythonスクリプトは、8人制サッカーの試合において、全選手が均等にフィールドプレイヤー（FP）として出場できるよう、最適な交代スケジュールを自動生成します。ゴールキーパー（GK）経験も考慮し、GKを担当した選手が他の試合で優先的に出場時間を確保できるアルゴリズムを実装しています。

## 主な機能

- **公平な出場時間配分**: 全選手のFP出場時間をできるだけ均等に配分
- **GK経験の考慮**: GKを担当した選手は他の試合で優先的にFP出場
- **柔軟な設定**: 試合数、試合時間、メンバー構成を自由に設定可能
- **詳細な統計情報**: 各選手の出場時間、平均、GK経験などを表示
- **CSV出力**: 全試合のスケジュールを見やすいCSV形式で出力

## 交代スケジュールに関する要件

- 1試合8人同時出場（FP: 7人、GK: 1人）
- FPは何度でも交代可能
- 出場後3分間は再交代不可(頻繁な変更を防ぐため)
- GKは試合中交代不可（1試合1人が最初から最後まで務める）

## 必要環境

- Python 3.6以上
- 標準ライブラリのみ使用（追加パッケージ不要）

## インストール

```bash
git clone https://github.com/yourusername/soccer-schedule-generator.git
cd soccer-schedule-generator
```

## 使い方

### 基本的な実行方法

```bash
python soccer_schedule_generator.py
```

### 入力項目

スクリプトを実行すると、以下の項目を順番に入力します：

1. **試合数**: 大会での試合数（1以上）
2. **試合時間**: 1試合の時間（分）（3分以上）
3. **メンバー名**: カンマ区切りで選手名を入力（8～18人）

### 入力例

```
試合数を入力してください: 3
1試合の時間（分）を入力してください: 40

メンバー名をカンマ区切りで入力してください。
例: 太郎,次郎,三郎,四郎,五郎,六郎,七郎,八郎
メンバー名: 太郎,次郎,三郎,四郎,五郎,六郎,七郎,八郎,九郎,十郎,十一郎,十二郎
```

## 出力

### CSVファイル（soccer_schedule.csv）

全試合のスケジュールが1つのCSVファイルに出力されます。

#### CSV形式の説明

- **SM**: Starting Member（先発メンバー）
- **SM(GK)**: Starting Member (GoalKeeper)（先発GK）
- **RM**: Reserve Member（リザーブメンバー）
- **IN**: 交代入場
- **OUT**: 交代退場
- 空欄: 変化なし

#### CSVサンプル

```csv
試合1
時間(分),太郎,次郎,三郎,四郎,五郎,六郎,七郎,八郎,九郎,十郎,十一郎,十二郎
0分,SM(GK),SM,SM,SM,SM,SM,SM,SM,RM,RM,RM,RM
3分,,OUT,OUT,OUT,,,,,IN,IN,IN,
6分,,IN,IN,,OUT,OUT,OUT,,,,,IN
...
```

### 統計情報（コンソール出力）

実行後、以下の統計情報がコンソールに表示されます：

#### 選手ごとの統計

- 各試合でのFP出場時間
- 全試合合計のFP出場時間
- 1試合平均のFP出場時間
- GK出場試合数

#### 試合ごとの統計

- 各試合の平均出場時間
- 各試合の最小・最大出場時間

#### 全体統計

- FP出場時間の平均（全試合合計）
- GK経験者数

### 統計情報サンプル

```
=== 統計情報 ===
選手名             試合1        試合2        試合3        合計         平均         GK出場      
------------------------------------------------------------------------------
太郎              0         分 40        分 40        分 80        分 26.7      分 1         試合
次郎              27        分 25        分 21        分 73        分 24.3      分 0         試合
三郎              27        分 22        分 22        分 71        分 23.7      分 0         試合
...

試合1: 平均23.3分 (最小0分, 最大27分)
試合2: 平均23.3分 (最小0分, 最大40分)
試合3: 平均23.3分 (最小0分, 最大40分)

FP出場時間（全試合合計）: 平均70.0分 (最小47分, 最大80分)
GK経験者数: 3人 / 12人
```

## アルゴリズムの特徴

### 1. 出場時間の均等化

全選手のFP出場時間を最優先で均等化します。各選手の目標出場時間を計算し、その目標に近づくよう交代を決定します。

### 2. GK経験者への配慮

GKを担当した試合ではFP出場時間が0分になるため、他の試合で優先的にFP出場時間を与えます。具体的には：

- GK経験者の優先度を大幅に上げる
- GK経験者がベンチにいる場合、積極的に交代で投入
- GK経験者がピッチにいる場合、交代を控えめにする

### 3. 3分ルールの遵守

出場した選手は最低3分間プレーし、その後交代可能になります。これにより：

- 選手の負担を軽減
- 試合の流れを保つ
- 現実的な交代パターンを実現

### 4. GK経験の分散

できるだけ多くの選手がGKを経験できるよう、GK経験の少ない選手を優先的にGKに配置します。

## 制約事項

- メンバー数は8人以上18人以下
- 試合時間は3分以上
- GKを担当した試合では、その選手のFP出場時間は0分になります
- 試合数が少ない場合（3試合以下）、GK経験者の出場時間が他の選手より少なくなる可能性があります
- ランダム性があるため、実行ごとに結果が若干異なる場合があります

## 推奨される使用条件

より均等な出場時間配分を実現するために、以下の条件を推奨します：

- **試合数**: 5試合以上
- **メンバー数**: 10～14人
- **試合時間**: 15分以上

これらの条件下では、GK経験者も含めて全選手がより均等な出場時間を確保できます。

## トラブルシューティング

### Q: GK経験者の出場時間が少ない

**A**: 試合数が少ない（3試合以下）場合、GK経験者が他の試合で十分な時間を確保できない場合があります。試合数を増やすか、手動で微調整することをお勧めします。

### Q: エラー「メンバー数は8人以上である必要があります」

**A**: 8人制サッカーでは最低8人必要です。メンバー名を8人以上入力してください。

### Q: エラー「同じ名前のメンバーが含まれています」

**A**: メンバー名が重複しています。各選手に異なる名前を付けてください。

## ライセンス

MIT License

## 作者

ジュニアサッカーチームの公平な試合運営をサポートするために開発されました。

## 貢献

バグ報告や機能要望は、GitHubのIssuesでお願いします。プルリクエストも歓迎します。

## 更新履歴

### v3.0 (2026-01-06)
- GK経験者の優先度アルゴリズムを大幅改善
- 1試合平均のFP出場時間を統計情報に追加
- メンバー名のカンマ区切り入力に対応
- 日本語名前のサポート

### v2.0
- CSV出力形式の改善（SM/RM/IN/OUT表記）
- 統計情報の詳細化
- 試合ごとの出場時間表示を追加

### v1.0
- 初版リリース
- 基本的なスケジュール生成機能
